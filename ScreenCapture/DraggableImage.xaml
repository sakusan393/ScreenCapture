<UserControl x:Class="ScreenCapture.DraggableImage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid x:Name="Root">
        <Grid x:Name="TransformContainer"
              RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="ScaleTransform"/>
                    <RotateTransform x:Name="RotateTransform"/>
                </TransformGroup>
            </Grid.RenderTransform>
            <Image x:Name="ImageControl"
                   Stretch="Fill"
                   Panel.ZIndex="0" />
            <Border x:Name="ImageBorder"
                    BorderBrush="White"
                    BorderThickness="15"
                    Visibility="Collapsed"
                    IsHitTestVisible="False"
                    Panel.ZIndex="1"/>

            <Thumb x:Name="DragThumb"
                   Cursor="SizeAll"
                   Background="Transparent"
                   Opacity="0"
                   IsHitTestVisible="True"
                   Panel.ZIndex="2"/>

            <Border x:Name="BoundingBox"
                    BorderBrush="#FF00BFFF"
                    BorderThickness="2"
                    Visibility="Collapsed"
                    IsHitTestVisible="True"
                    Panel.ZIndex="3">
                <Grid>
                    <Thumb x:Name="TopLeftHandle"
                           Width="12" Height="12"
                           Cursor="SizeNWSE"
                           Background="White"
                           BorderBrush="#FF00BFFF"
                           BorderThickness="2"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Margin="-6,-6,0,0"
                           Panel.ZIndex="2"/>
                    
                    <Thumb x:Name="TopRightHandle"
                           Width="12" Height="12"
                           Cursor="SizeNESW"
                           Background="White"
                           BorderBrush="#FF00BFFF"
                           BorderThickness="2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Top"
                           Margin="0,-6,-6,0"
                           Panel.ZIndex="2"/>
                    
                    <Thumb x:Name="BottomLeftHandle"
                           Width="12" Height="12"
                           Cursor="SizeNESW"
                           Background="White"
                           BorderBrush="#FF00BFFF"
                           BorderThickness="2"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Bottom"
                           Margin="-6,0,0,-6"
                           Panel.ZIndex="2"/>
                    
                    <Thumb x:Name="BottomRightHandle"
                           Width="12" Height="12"
                           Cursor="SizeNWSE"
                           Background="White"
                           BorderBrush="#FF00BFFF"
                           BorderThickness="2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Bottom"
                           Margin="0,0,-6,-6"
                           Panel.ZIndex="2"/>

                    <Thumb x:Name="RotateHandle"
                           Width="12" Height="12"
                           Cursor="Hand"
                           Background="LimeGreen"
                           BorderBrush="#FF00BFFF"
                           BorderThickness="2"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Top"
                           Margin="0,-26,0,0"
                           Panel.ZIndex="2"/>

                    <Button x:Name="BorderColorButton"
                            Width="20" Height="20"
                            Content="CLR"
                            FontSize="8"
                            FontWeight="Bold"
                            Cursor="Hand"
                            Background="White"
                            Foreground="Black"
                            BorderBrush="#FF00BFFF"
                            BorderThickness="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="-44,2,46,0"
                            Padding="0,-2,0,0"
                            ToolTip="Border color"
                            Panel.ZIndex="10"/>
                    <Button x:Name="BorderToggleButton"
                            Width="20" Height="20"
                            Content="BR"
                            FontSize="10"
                            FontWeight="Bold"
                            Cursor="Hand"
                            Background="White"
                            Foreground="Black"
                            BorderBrush="#FF00BFFF"
                            BorderThickness="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="-22,2,24,0"
                            Padding="0,-2,0,0"
                            ToolTip="Border"
                            Panel.ZIndex="10"/>
                    <Button x:Name="DeleteButton"
                            Width="20" Height="20"
                            Content="X"
                            FontSize="14"
                            FontWeight="Bold"
                            Cursor="Hand"
                            Background="Red"
                            Foreground="White"
                            BorderBrush="#FF00BFFF"
                            BorderThickness="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="0,2,2,0"
                            Padding="0,-2,0,0"
                            Panel.ZIndex="10"/>
                </Grid>
            </Border>
        </Grid>

    </Grid>
</UserControl>
